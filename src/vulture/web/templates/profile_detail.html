{% extends "base.html" %}

{% block content %}
<section class="panel">
  <h2>Profile #{{ profile.id }} - {{ profile.name }}</h2>
  <p>Job Family: {{ profile.job_family }}</p>
  <p>{{ profile.summary }}</p>
  <p><a href="/profiles/{{ profile.id }}/questionnaire/review">Review Questionnaire ({{ questionnaire_review|length }} pending)</a></p>
</section>

<section class="panel">
  <h2>Import CV</h2>
  <form method="post" action="/web/profiles/{{ profile.id }}/cv/import">
    <label>Format
      <select name="format">
        <option value="latex" selected>latex</option>
        <option value="text">text</option>
      </select>
    </label>
    <label>Scope
      <select name="scope">
        <option value="all" selected>all</option>
        <option value="hiring_core">hiring_core</option>
        <option value="research_core">research_core</option>
      </select>
    </label>
    <label>CV Text <textarea name="cv_text" rows="8" required></textarea></label>
    <button type="submit">Import CV</button>
  </form>
</section>

<section class="grid">
  <article class="panel">
    <h2>Personal</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/personal">
      <label>First Name <input name="first_name" value="{{ personal.first_name }}" /></label>
      <label>Last Name <input name="last_name" value="{{ personal.last_name }}" /></label>
      <label>Email <input name="email" value="{{ personal.email }}" /></label>
      <label>Phone (E.164) <input name="phone_e164" value="{{ personal.phone_e164 }}" /></label>
      <label>Headline <input name="headline" value="{{ personal.headline }}" /></label>
      <label>Current Company <input name="current_company" value="{{ personal.current_company }}" /></label>
      <button type="submit">Save Personal</button>
    </form>
  </article>

  <article class="panel">
    <h2>Education</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/education">
      <label>Institution <input name="institution" required /></label>
      <label>Degree <input name="degree" required /></label>
      <label>Field <input name="field" /></label>
      <label>GPA <input name="gpa" /></label>
      <label>Thesis Title <input name="thesis_title" /></label>
      <label>Advisor <input name="advisor" /></label>
      <label>Lab <input name="lab" /></label>
      <button type="submit">Add Education</button>
    </form>
    <ul>
      {% for row in educations %}
      <li>{{ row.degree }} - {{ row.institution }}</li>
      {% else %}
      <li>No education records.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Research Experience</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/experience">
      <label>Organization <input name="company" required /></label>
      <label>Title <input name="title" required /></label>
      <label>Advisor <input name="advisor" /></label>
      <label>Description <textarea name="description" rows="3"></textarea></label>
      <label>Impact Summary <textarea name="impact_summary" rows="2"></textarea></label>
      <label>Skills CSV <input name="skills_csv" /></label>
      <button type="submit">Add Experience</button>
    </form>
    <ul>
      {% for row in experiences %}
      <li>{{ row.title }} - {{ row.company }}</li>
      {% else %}
      <li>No experience records.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Skills</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/skill">
      <label>Name <input name="name" required /></label>
      <label>Category <input name="category" required /></label>
      <label>Years <input name="years" type="number" step="0.1" /></label>
      <label>Proficiency <input name="proficiency" /></label>
      <button type="submit">Add Skill</button>
    </form>
    <ul>
      {% for row in skills %}
      <li>{{ row.name }} ({{ row.category }})</li>
      {% else %}
      <li>No skills yet.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Publications</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/publication">
      <label>Title <input name="title" required /></label>
      <label>Venue <input name="venue" /></label>
      <label>Year <input name="publication_year" type="number" /></label>
      <label>Status <input name="status" /></label>
      <label>DOI <input name="doi" /></label>
      <label>URL <input name="url" /></label>
      <label>Contribution <textarea name="contribution" rows="2"></textarea></label>
      <button type="submit">Add Publication</button>
    </form>
    <ul>
      {% for row in publications %}
      <li>{{ row.title }}</li>
      {% else %}
      <li>No publications yet.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Awards</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/award">
      <label>Title <input name="title" required /></label>
      <label>Issuer <input name="issuer" /></label>
      <label>Year <input name="award_year" type="number" /></label>
      <label>Details <textarea name="details" rows="2"></textarea></label>
      <button type="submit">Add Award</button>
    </form>
    <ul>
      {% for row in awards %}
      <li>{{ row.title }}</li>
      {% else %}
      <li>No awards yet.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Conferences</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/conference">
      <label>Name <input name="name" required /></label>
      <label>Year <input name="event_year" type="number" /></label>
      <label>Role <input name="role" /></label>
      <label>Details <textarea name="details" rows="2"></textarea></label>
      <button type="submit">Add Conference</button>
    </form>
    <ul>
      {% for row in conferences %}
      <li>{{ row.name }}</li>
      {% else %}
      <li>No conferences yet.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Teaching</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/teaching">
      <label>Role <input name="role" required /></label>
      <label>Organization <input name="organization" /></label>
      <label>Term <input name="term" /></label>
      <label>Details <textarea name="details" rows="2"></textarea></label>
      <button type="submit">Add Teaching</button>
    </form>
    <ul>
      {% for row in teaching %}
      <li>{{ row.role }}</li>
      {% else %}
      <li>No teaching records.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Service</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/service">
      <label>Role <input name="role" /></label>
      <label>Organization <input name="organization" /></label>
      <label>Event Name <input name="event_name" /></label>
      <label>Year <input name="event_year" type="number" /></label>
      <label>Details <textarea name="details" rows="2"></textarea></label>
      <button type="submit">Add Service</button>
    </form>
    <ul>
      {% for row in service %}
      <li>{{ row.role or row.event_name }}</li>
      {% else %}
      <li>No service records.</li>
      {% endfor %}
    </ul>
  </article>

  <article class="panel">
    <h2>Additional Projects</h2>
    <form method="post" action="/web/profiles/{{ profile.id }}/additional-project">
      <label>Title <input name="title" required /></label>
      <label>Summary <textarea name="summary" rows="2"></textarea></label>
      <label>Skills CSV <input name="skills_csv" /></label>
      <label>Impact <textarea name="impact" rows="2"></textarea></label>
      <button type="submit">Add Project</button>
    </form>
    <ul>
      {% for row in additional_projects %}
      <li>{{ row.title }}</li>
      {% else %}
      <li>No additional projects.</li>
      {% endfor %}
    </ul>
  </article>
</section>
{% endblock %}
